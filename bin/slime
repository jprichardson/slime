#!/usr/bin/env node

var fs = require('fs')
var path = require('path')
var repl = require('repl')
var util = require('util')
var chalk = require('chalk')

// default to 'dev'
var NODE_ENV = process.env.NODE_ENV || 'dev'
var PKG = require(path.join(process.cwd(), 'package.json'))

// init REPL
var r = repl.start({
  prompt: util.format('%s (%s)> ', PKG.name, NODE_ENV),
  ignoreUndefined: true
}).on('exit', function() {
  console.log('exiting...')
  process.exit()
})

// default contexts
r.context._ = require('lodash')

// init requires
Object.keys(PKG.dependencies).forEach(function(dep) {
  r.context[dep] = require(dep)
})
